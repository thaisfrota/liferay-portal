definition {

	macro addField {
		Navigator.gotoSidebarTab(tabName = "Builder");

		Navigator.gotoNavTab(navTab = "Fields");

		if (!(isSet(fieldLocation))) {
			var fieldLocation = "last()";
		}

		DragAndDrop.javaScriptDragAndDropToObject(
			key_fieldLocation = "${fieldLocation}",
			key_fieldName = "${fieldName}",
			locator1 = "Sidebar#ADD_FIELD_NAME",
			locator2 = "Sidebar#ADD_FIELD_POSITION",
			value1 = "${fieldName}");

		WaitForVisible(locator1 = "Sidebar#BACK");

		Type(
			key_fieldLabel = "Label",
			locator1 = "TextInput#GENERIC_TEXT_INPUT",
			value1 = "${fieldLabel}");

		Click(locator1 = "Sidebar#BACK");
	}

	macro addFieldOptions {
		if (!(isSet(index))) {
			var index = "1";
		}

		DEStructure.openField(
			fieldLabel = "${fieldLabel}",
			index = "${index}");

		var optionIndex = "1";

		for (var optionValue : list "${optionValueList}") {
			if (isSet(optionFieldLabel)) {
				Type(
					index = "${optionIndex}",
					key_optionFieldLabel = "${optionFieldLabel}",
					locator1 = "Sidebar#OPTION_INPUT",
					value1 = "${optionValue}");
			}
			else {
				Type(
					index = "${optionIndex}",
					locator1 = "Sidebar#OPTION_INPUT_WITHOUT_LABEL",
					value1 = "${optionValue}");
			}

			var optionIndex = ${optionIndex} + 1;
		}

		Click(locator1 = "Sidebar#BACK");
	}

	macro assertFieldReference {
		if (!(isSet(index))) {
			var index = "1";
		}

		DEStructure.openField(
			fieldLabel = "${fieldLabel}",
			index = "${index}");

		Navigator.gotoNavTab(navTab = "Advanced");

		AssertTextEquals.assertValue(
			locator1 = "Sidebar#DDM_FIELD_REFERENCE",
			value1 = "${fieldReference}");

		Click(locator1 = "Sidebar#BACK");
	}

	macro assertOptionReferences {
		if (!(isSet(index))) {
			var index = "1";
		}

		DEStructure.openField(
			fieldLabel = "${fieldLabel}",
			index = "${index}");

		var optionIndex = "1";

		for (var optionReference : list "${optionReferenceList}") {
			if (isSet(optionFieldLabel)) {
				AssertTextEquals.assertValue(
					index = "${optionIndex}",
					key_optionFieldLabel = "${optionFieldLabel}",
					locator1 = "Sidebar#OPTION_FIELD_REFERENCE_INPUT",
					value1 = "${optionReference}");
			}
			else {
				AssertTextEquals.assertValue(
					index = "${optionIndex}",
					locator1 = "Sidebar#OPTION_WITHOUT_LABEL_FIELD_REFERENCE_INPUT",
					value1 = "${optionReference}");
			}

			var optionIndex = ${optionIndex} + 1;
		}

		Click(locator1 = "Sidebar#BACK");
	}

	macro editFieldReference {
		if (!(isSet(index))) {
			var index = "1";
		}

		DEStructure.openField(
			fieldLabel = "${fieldLabel}",
			index = "${index}");

		Navigator.gotoNavTab(navTab = "Advanced");

		Type(
			key_fieldLabel = "Field Reference",
			locator1 = "TextInput#GENERIC_TEXT_INPUT",
			value1 = "${fieldReference}");

		if (isSet(assertErrorMessage)) {
			AssertTextEquals(
				locator1 = "DataEngineBuilder#FIELD_REFERENCE_ERROR",
				value1 = "${assertErrorMessage}");
		}

		Click(locator1 = "Sidebar#BACK");
	}

	macro getFieldReference {
		if (!(isSet(index))) {
			var index = "1";
		}

		DEStructure.openField(
			fieldLabel = "${fieldLabel}",
			index = "${index}");

		Navigator.gotoNavTab(navTab = "Advanced");

		var fieldReference = selenium.getElementValue(locator1 = "Sidebar#DDM_FIELD_REFERENCE");

		Click(locator1 = "Sidebar#BACK");

		return "${fieldReference}";
	}

	macro openField {
		if (!(isSet(index))) {
			var index = "1";
		}

		if (IsElementPresent(locator1 = "Modal#MODAL")) {
			AssertClick.assertPartialTextClickAt(
				index = "${index}",
				key_fieldLabel = "${fieldLabel}",
				locator1 = "DataEngineBuilder#FIELD_LABEL_IN_MODAL_INDEXED",
				value1 = "${fieldLabel}");
		}
		else {
			AssertClick.assertPartialTextClickAt(
				index = "${index}",
				key_fieldLabel = "${fieldLabel}",
				locator1 = "DataEngineBuilder#FIELD_LABEL_INDEXED",
				value1 = "${fieldLabel}");
		}
	}

}